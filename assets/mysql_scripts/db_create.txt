CREATE TABLE rollen
(
    rollen_id int not null PRIMARY KEY,
    beschreibung text
);
CREATE TABLE ernaehrung
(
    ernaehrung_id int not null PRIMARY KEY,
    beschreibung text
);

CREATE TABLE allergien
(
    allergien_id int not null PRIMARY KEY,
    beschreibung text
);

CREATE TABLE user_profil
(
	vorname VARCHAR(30),
    nachname VARCHAR(30),
    email VARCHAR(50) UNIQUE not null,
    reg_datum TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    gender VARCHAR(10),
    allergien_id int,
    ernaehrung_id int,
    FOREIGN KEY (allergien_id) REFERENCES allergien(allergien_id),
    FOREIGN KEY (ernaehrung_id) REFERENCES ernaehrung(ernaehrung_id),
    rollen_id int not null,
    FOREIGN KEY (rollen_id) REFERENCES rollen(rollen_id)
    pswd VARCHAR(512) NOT null
);
CREATE TABLE reservierung
(
	reservierung_id int not null PRIMARY KEY,
    reservierte_zimmer VARCHAR() UNIQUE,
    datum_reservierung_anfang date not null,
    datum_reservierung_ende date not null,
    user_id int not null,
    FOREIGN KEY (user_id) REFERENCES user_profil(user_id)
);
CREATE TABLE login_data
(
    FOREIGN KEY(user_id) REFERENCES user_profil(user_id),
    FOREIGN KEY(email) REFERENCES user_profil(email),
    login_id int not null PRIMARY KEY,
    password VARCHAR(255)
    );
ALTER TABLE user_profil
ADD user_id int,
ADD PRIMARY KEY(user_id) REFERENCES user_profil(user_id);->UNIQUE and not null (was added in phpmyadmin)

CREATE TABLE rooms (
    room_id INT PRIMARY KEY AUTO_INCREMENT,
    room_number INT NOT NULL
);

CREATE TABLE reservations (
    reservation_id INT PRIMARY KEY AUTO_INCREMENT,
    user_id INT,
    start_date DATE NOT NULL,
    end_date DATE NOT NULL,
    breakfast BOOLEAN NOT NULL,
    parking BOOLEAN NOT NULL,
    pets BOOLEAN NOT NULL,
    status ENUM('new', 'confirmed', 'canceled') DEFAULT 'new'
);

CREATE TABLE reservation_rooms (
    reservation_id INT,
    room_id INT,
    PRIMARY KEY (reservation_id, room_id),
    FOREIGN KEY (reservation_id) REFERENCES reservations(reservation_id),
    FOREIGN KEY (room_id) REFERENCES rooms(room_id)
);

-- add price per night column
ALTER TABLE rooms
ADD COLUMN price_per_night DECIMAL(10,2);

-- Update prices for different rooms
UPDATE rooms SET price_per_night = 80 WHERE room_id IN (1, 2, 3, 4);
UPDATE rooms SET price_per_night = 120 WHERE room_id IN (5, 6);
UPDATE rooms SET price_per_night = 200 WHERE room_id IN (7, 8);
UPDATE rooms SET price_per_night = 250 WHERE room_id IN (9, 10);

-- Add a new column for person_amount
ALTER TABLE reservations
ADD COLUMN person_amount INT NOT NULL;

-- add total_charge column to reservation

ALTER TABLE reservations
ADD COLUMN total_charge DECIMAL(10,2) NOT NULL;

-- add user_status column to user_profil

ALTER TABLE reservations
ADD COLUMN user_status BOOLEAN NOT NULL;

-- add activity status to user_profil
ALTER TABLE user_profil
ADD COLUMN user_status VARCHAR(10) NOT NULL DEFAULT 'active';


